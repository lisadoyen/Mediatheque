{% extends "layout.html.twig" %}
{% block body %}

    <div class="container cadre">
        <div class="row">
            <div class="col-sm">
                <h1>Votre Panier ({{ panier|length }})</h1>
            </div>
            <div class="col-sm">
                <b class="float-right pr-2">00:00:00 <span class="text-danger">*</span></b>
            </div>
        </div><hr>

        {% if panier is not empty %}
            <div class="row justify-content-end">
                <form action="{#{ path('remove_all_panier') }#}" method="POST" style="display:inline">
                    <input type="hidden" name="token" value="{{ csrf_token('panier_delete') }}">
                    <input type="hidden" name="_method" value="DELETE">
                    <button type="submit" class="btn btn-danger float-right m-3" onclick="return confirm('Voulez vous vraiment vider votre panier ?')">Vider le panier</button>
                </form>
            </div>
            <div class="row mt-3">
                <div class="col-sm">
                    <b>Vignette</b>
                </div>
                <div class="col-sm">
                    <b>Titre</b>
                </div>
                <div class="col-sm">
                    <b>Genre</b>
                </div>
                <div class="col-sm">
                    <b>Catégorie</b>
                </div>
                <div class="col-sm</b>">
                    <b>Statut</b>
                </div>

                <div class="col-5"></div>
            </div>
            <hr style="border: 1px solid black;">
            {% for pan in panier %}
                <div class="row">
                    <div class="col-sm">
                        {%  if pan.article.vignette is not empty %}
                            <img src="{{ pan.article.vignette }}" alt="image de {{ pan.article.titre }}" width="120" height="120">
                        {% else %}
                            <img src="{{asset('assets/images/noImage.jpg')}}" alt="pas d'image" width="120" height="120">
                        {% endif %}
                    </div>
                    <div class="col-sm">
                        {%  if pan.article.titre is not empty %}
                            {{ pan.article.titre | capitalize }}
                        {% else %}
                            {{ pan.article.codeArticle }}
                        {% endif %}
                    </div>
                    <div class="col-sm">
                        {{ pan.article.genre.libelle }}
                    </div>
                    <div class="col-sm">
                        {{ pan.article.categorie.libelle }}
                    </div>
                    <div class="col-sm">
                        <span class="text-success">{{ pan.article.statut.libelle }}</span>
                    </div>
                    <div class="col-3">
                        <a href="{{ path('article_details', {id: pan.article.id}) }}" class="btn edit-btn">Voir plus de détail</a>
                    </div>

                    <div class="col-1 align-content-center">
                        <button type="button" class="close p-4" aria-label="Close" data-toggle="modal" data-target="#supprArticlePanier">
                            <span aria-hidden="true">&times;</span>
                        </button>

                        <div class="modal fade" id="supprArticlePanier" tabindex="-1" role="dialog" aria-labelledby="supprArticlePanierTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">Supprimer cette article</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        Voulez vous mettre cette article dans vos favoris ?
                                    </div>
                                    <div class="modal-footer">
                                        <div class="col-sm">
                                            <button type="button" class="btn btn-danger float-right">Non</button>
                                        </div>
                                        <div class="col-sm">
                                            <button type="button" class="btn btn-success float-left">Oui</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><hr>
            {% endfor %}
            <div class="row justify-content-end">

                <div class="col-sm">Total des articles achetés : 0€</div>
                <div class="col-sm">
                    <form action="{#{ path('') }#}" method="POST" style="display:inline">
                        <input type="hidden" name="token" value="{# { csrf_token('') }#}">
                        <input type="hidden" name="_method" value="POST">
                        <button type="submit" class="btn btn-success float-right m-3" onclick="return confirm('Voulez vous vraiment valider votre panier ?')">Valider la commande</button>
                    </form>
                </div>
            </div>
            <small class="text-danger">* Temps restant avant le vidage du panier</small>
        {% else %}
            <div class="col-sm m-2">
                <b>Vous n'avez pas d'article dans votre panier</b>
            </div>
        {% endif %}
    </div>
{% endblock %}