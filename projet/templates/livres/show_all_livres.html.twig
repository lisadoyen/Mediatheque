{% extends "layout.html.twig" %}
{% block body %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3">
                <h2 class="center p-4">Filtre
                <button class="edit-btn" onclick="toggle_visibility(1)"><i onclick="btn_icone(this)" class="fas fa-arrow-up"></i></button></h2>
                {% include 'data/_filtre_articles.html.twig' %}
            </div>
            <!--
                Récup les infos dans entite via article_entite
            -->
            <div class="col-lg-9">
                {% if livres is defined %}
                    {% for livre in livres | slice(0, 30) %}
                        <div class="col-4 mt-4 float-left">
                            <div class="p-2">
                                {% if nouveaute is defined %}
                                    {% for new in nouveaute %}
                                        {% if new.id == livre.id %}
                                            <span class="text-size text-bold text-size-title text-nouveaute"> nouveau !</span>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            </div>
                            <div class="row p-2">
                                <div class="col-lg-4">
                                {% if livre.vignette == NULL %}
                                    <input type="hidden" name="id" value="{{ livre.id }}">
                                    <a href="{{ path('livre_details', {id: livre.id}) }}">
                                        <img src="{{asset('assets/images/noImage.jpg')}}" alt="pas d'image" width="120" height="120"></a>
                                {% else %}
                                    <input type="hidden" name="id" value="{{ livre.id }}">
                                    <a href="{{ path('livre_details', {id: livre.id}) }}">
                                        <img src="{{ livre.vignette }}" alt="{{ livre.vignette }}" width="120" height="120"></a>
                                {% endif %}
                                    <div class="p-4">
                                    <input type="hidden" name="id" value="{{ livre.id }}">
                                    {%  if livre.statut.libelle == "empruntable" %}
                                        <a class="style-button-article-emprunt">Emprunter</a>
                                    {% else %}
                                        <a class="style-button-article-achat">Acheter</a>
                                    {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-7">
                                        <div class="text-size-title"><span class="text-orange"> titre : </span><span class="text-bold">{{livre.titre | capitalize }}</span></div>
                                        <div class="text-size"><span class="text-orange">auteur : </span>auteur</div>
                                        <div class="text-size"><span class="text-orange">date de publication : </span>{{livre.datePublication | date('d/m/Y')}}</div>

                                        <div class="text-size mt-3"><span class="text-orange">moyenne : </span>moyenne (étoile)</div>
                                        {%  if livre.statut.libelle == "vendable" %}
                                            <hr>
                                            <div class="text-size"><span class="text-orange">prix : </span><span style="color: red">{{ livre.montantVente }}€</span></div>
                                        {% endif %}
                                </div>
                                <div class="col-md-1">
                                    {% if livre.favoris is empty %}
                                        <a href="{{ path('add_article_favoris', {id: livre.id, page: "list"}) }}"><i class="far fa-star text-danger fa-2x"></i></a>
                                    {% else %}
                                        <a href="{{ path('remove_article_favoris', {id: livre.id, page: "list"}) }}"><i class="fas fa-star text-danger fa-2x"></i></a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="pagination">
                {{ knp_pagination_render(livres)}}</div>
        </div>
    </div>
{% endblock %}