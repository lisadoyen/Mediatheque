<div class="container-fluid">
    <div class="row pl-5 pt-5 pr-5">
        <div class="col-lg-8">
            <div class="row">
                <div class="col-lg-9">
                    <span style="font-size: 4vh;font-weight: bold;color : #aa2222 !important;"> Commentaires </span>
                </div>
                <div class="col-lg-3">
                    {{ render(controller('App\\Controller\\AvisController::getTotalCommentairesByArticle',{ 'idArticle': article.id })) }}
                </div>
            </div>
            <hr>
        </div>
        <div class="col-lg-4 text-center">
            <div class="text-detail-size-subtitle p-2"><span class="text-bold">Ajouter un commentaire et/ou attribuer une note</span></div>
        </div>
    </div>
    <div class="row pl-5 pr-5">
        <div class="col-lg-8">
            {% if avis is defined %}
                {% for av in avis %}
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="row">
                                <div class="col-lg-1">
                                    {% if av.utilisateur.avatar == NULL %}
                                        <img src="{{asset('assets/images/noImage.jpg')}}" alt="pas d'image" width="40" height="40">
                                    {% else  %}
                                        <img src="{{asset('assets/images/account/')}}{{av.utilisateur.avatar}}" alt="Image {{av.utilisateur.avatar}}" width="40" height="40">
                                    {% endif %}
                                </div>
                                <div class="col-lg-11">
                                    <div class="text-size-title"><span class="text-orange text-bold"> {{ av.utilisateur.username }} </span></div>
                                    <div class="text-size pt-5">{{ av.texte | raw }}</div>
                                    <div class="text-size pt-3">Le {{ av.date|date('d/m/Y') }} Ã  {{ av.date|date('H:m') }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div>
                                {% if av.note is not empty %}
                                    note : {{ av.note }}
                                    {% for i in  1..5 %}
                                        {% set etoilevide = 0 %}
                                        {% if 0 == av.note %}
                                            <a href="#"><i id="{{ i }}" class="far fa-star fa-2x"></i></a>
                                        {% elseif 5 == av.note %}
                                            <a href="#"><i id="{{ i }}" class="fas fa-star fa-2x"></i></a>
                                        {% elseif i == av.note and i != 0 %}
                                            {% for j in 1..av.note %}
                                                {% set etoilevide = j %}
                                                <a href="#"><i id="{{ j }}" class="fas fa-star fa-2x"></i></a>
                                            {% endfor %}
                                            {% if etoilevide != 5 %}
                                                {% for k in etoilevide+1..5 %}
                                                    <a href="#"><i id="{{ k }}" class="far fa-star fa-2x"></i></a>
                                                {% endfor %}
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <hr>
                {% endfor %}
            {% endif %}
        </div>
        <div class="col-lg-4 text-center">
            {{ form_start(form) }}
            <input type="hidden" name="token" value="{{ csrf_token('add_commentaire')}}">
            <p>Veuillez saisir une note :{{ form_widget(form.note) }}</p>
            <p>Veuillez saisir un commentaire :</p>
            {{ form_row(form.texte) }}
            <button type="submit" class="edit-btn">{{ action|default('Valider') }}</button>
            {{ form_end(form) }}
        </div>
    </div>
</div>